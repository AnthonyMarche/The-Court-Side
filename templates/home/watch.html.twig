{% extends 'base.html.twig' %}

{% block title %}{{ video.title }}{% endblock %}

{% block body %}
    {#  video player section  #}
    <div class="watch-video-container text-center">
        <div class="watch-video-player-container">
            <video src="{{ asset(video.url) }}" class="embed-responsive-item video-player" controls></video>
        </div>
        <div class="video-infos-container">
            <div class="watch-video-head d-flex justify-content-between">
                <h2 class="watch-video-title text-left">{{ video.title }}</h2>
                <p class="watch-video-release">publi√©e le : {{ video.createdAt|date('d/m/Y') }}</p>
            </div>
            <div class="d-flex justify-content-between">
                <div class="text-left">
                    {% if not app.user %}
                        <button type="button" class="btn btn-sm mt-2 like-button" data-toggle="modal"
                                data-target="#featureModal">
                            <i class="bi bi-heart"></i> Like
                        </button>
                    {% else %}
                        <a class="js-like" href="{{ path('app_watch_like', {id: video.id}) }}">
                            <button type="button" class="btn btn-sm mt-2 like-button">
                                <i class="bi {{ video.isLikedByUser(app.user) ? 'bi-heart-fill' : 'bi-heart' }} js-class-icon"></i>
                                Like
                            </button>
                        </a>
                    {% endif %}
                </div>
                <div class="mt-2 share-buttons-container d-flex">
                    {# SHARE VIDEO #}
                    <div class="tweet-button-container">
                        {% set url = app.request.uri %}
                        <a class="twitter-share-button twitter"
                           href="https://twitter.com/intent/tweet"
                           data-size="large"
                           data-text="ü§Ø Cette vid√©o est incroyable ! ü§Ø
"
                           data-url="{{ url }}"
                           data-hashtags="{% for tag in video.tag %}{{ tag.name }},{% endfor %}{{ video.category.name }}"
                           data-via="TheCourtSide"
                           data-related="twitterapi,twitter">
                            Tweet
                        </a>
                    </div>
                    <div class="mail-button-container ml-2">
                        <a href="mailto:?subject=ü§Ø Cette vid√©o est incroyable ! ü§Ø&body=Regarde cette vid√©o !%0A{{ url }}"
                           class="btn btn-secondary btn-sm rounded-pill share-mail-button">
                            <i class="bi bi-envelope mail-icon"> </i>Mail
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="watch-video-description text-left mt-2">
            <p class="video-description-head">Description :</p>
            <p class="video-description">{{ video.description }}</p>
        </div>
        <div class="watch-video-tags-container">
            <div class="watch-video-tags d-flex pb-5">
                {% for tag in video.tag %}
                    <a href="{{ path('app_tag', {slug : tag.slug, sort : 'recent'}) }}">
                        <button type="button" class="btn btn-outline-primary tag-button btn-sm mr-2">
                            #{{ tag.name }}</button>
                    </a>
                {% endfor %}
            </div>
        </div>
        {% include '_includes/_modal.html.twig' with {
            buttons : true
        } %}

    </div>

    {#  see more section  #}
    <div class="container-fluid p-5 py-3 home-main-container">
        {% if video.category.videos|length > 4 %}{% set buttons = true %}{% else %}{% set buttons = false %}{% endif %}
        {% include '_includes/_videos_head.html.twig' with {
            title : 'Plus dans la cat√©gorie ' ~ video.category.name,
            buttons : buttons,
            path : path('app_single_category', {slug : video.category.slug, sort : 'recent'})
        } %}
        <div class="row">
            {% include '_includes/_videos_grid.html.twig' with {
                videos : moreVideos
            } %}
        </div>
    </div>

    {#  sponsor image  #}
    <div class="watch-sponsor-image">
        <img src="{{ asset('build/images/home-middle-image.jpg') }}" class="shadow-lg img-fluid home-middle-image"
             alt="watch sponsor image">
    </div>
{% endblock %}
